//===========================================================
// mmRISC-0 Project
//-----------------------------------------------------------
// File Name   : csr.h
// Description : CSR Access Instructions
//-----------------------------------------------------------
// History :
// Rev.01 2020.09.03 M.Maruyama First Release
//-----------------------------------------------------------
// Copyright (C) 2020-2021 M.Maruyama
//===========================================================

#ifndef CSR_H
#define CSR_H

#define STRING(str) #str

//--------------------------------
// Read CSR
//--------------------------------
#define read_csr(reg)                     \
({                                        \
    unsigned long __tmp;                  \
    asm volatile ("csrr %0, " STRING(reg) \
        : "=r"(__tmp));                   \
    __tmp;                                \
})

//--------------------------------
// Write CSR
//--------------------------------
#define write_csr(reg, val)                   \
({                                            \
    asm volatile ("csrw " STRING(reg) ", %0"  \
        :: "r"(val));                         \
})

#endif

//===========================================================
// End of Program
//===========================================================
